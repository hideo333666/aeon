<div class="container mt-5">
  <h1 class="mb-4">ダッシュボード</h1>

  <div class="row">
    <div class="col-md-6">
      <h2 class="h4 mb-3">プロジェクト一覧</h2>
      <ul class="list-group">
        <% @projects.each do |project| %>
          <li class="list-group-item">
            <%= link_to project.name, project_path(project) %>
          </li>
        <% end %>
      </ul>
    </div>
    <div class="col-md-6">
      <h2 class="h4 mb-3">タスク一覧</h2>
      <ul class="list-group" id="taskList">
        <% @tasks.each do |task| %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <%= link_to task.title, task_path(task), class: "task-link" %>
            <%= check_box_tag "task_completed_#{task.id}", task.id, task.is_checked, class: 'task-completed-checkbox', data: { url: toggle_task_path(task) } %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>

  <div class="mt-4">
    <%= link_to "新しいプロジェクトを作成", new_project_path, class: "btn btn-primary mr-2" %>
  </div>

  <!-- タスク新規作成 モーダルトリガーボタン -->
  <button type="button" class="btn btn-primary mt-3" data-toggle="modal" data-target="#taskModal">
    新しいタスクを作成
  </button>
  <!-- モーダル本体 -->
  <div class="modal fade" id="taskModal" tabindex="-1" role="dialog" aria-labelledby="taskModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="taskModalLabel">新しいタスクを作成</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <%= render partial: 'public/tasks/form', locals: { task: @task } %> <!-- タスクのフォーム部分を部分テンプレートとしてレンダリング -->
        </div>
      </div>
    </div>
  </div>
  
  <!--タスク詳細画面用モーダル -->
  <div class="modal fade" id="taskDetailModal" tabindex="-1" role="dialog" aria-labelledby="taskDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="taskDetailModalLabel">タスク詳細</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- Content will be loaded here dynamically -->
      </div>
    </div>
  </div>
</div>
</div>
